<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.car.dao.CommodityDao">

    <insert id="insertCommodity" parameterType="com.car.entity.OldCommodity">
        INSERT INTO old_commodity (commodity_category_id,commodity_name,commodity_picture,
        description,use_start_time,use_end_time,use_state,price,publish_user_id,
        trade_mode,create_time,update_time,brand,model,color,material,have_flaw,
        tyre_size,hole_spacing,manufactur_mode,light_type,hub_size,size,type,
        flaw,position,commodity_num)
        VALUES (#{commodityCategoryId},#{commodityName},#{commodityPicture},
        #{description},#{useStartTime},#{useEndTime},#{useState},#{price},#{publishUserId},
        #{tradeMode},#{createTime},#{updateTime},#{brand},#{model},#{color},#{material},#{haveFlaw},
        #{tyreSize},#{holeSpacing},#{manufacturMode},#{lightType},#{hubSize},#{size},#{type},
        #{flaw},#{position},#{commodityNum})
    </insert>

    <select id="queryCommoditysByCategoryId" resultType="com.car.vo.CommodityVO">
        SELECT
          id commodityId,
          commodity_name,
          commodity_picture,
          description,
          use_start_time,
          use_end_time,
          use_state,
          price,
          trade_mode,
          brand,
          model,
          color,
          material,
          have_flaw,
          tyre_size,
          hole_spacing,
          manufactur_mode,
          light_type,
          hub_size,
          size,
          flaw,
          type,
          position,
          commodity_num
        FROM old_commodity
        WHERE commodity_category_id = #{commodityCategoryId}
        ORDER BY seq DESC LIMIT #{pageId}, #{pageSize}
    </select>

    <delete id="deleteCommodityById">
        DELETE
        FROM
          old_commodity
        WHERE id = #{commodityById}
    </delete>

    <update id="updateCommodityById">
        UPDATE
          old_commodity
        SET
          <if test="commodityName != null">
              commodity_name = #{commodityName},
          </if>
          <if test="commodityPicture != null">
              commodity_picture = #{commodityPicture},
          </if>
          <if test="description != null">
              description = #{description},
          </if>
          <if test="useStartTime != null">
              use_start_time = #{useStartTime},
          </if>
          <if test="useEndTime != null">
              use_end_time = #{useEndTime},
          </if>
          <if test="useState != null">
              use_state = #{useState},
          </if>
          <if test="price != null">
              price = #{price},
          </if>
          <if test="tradeMode != null">
              trade_mode = #{tradeMode},
          </if>
          <if test="model != null">
              model = #{model},
          </if>
          <if test="brand != null">
              brand = #{brand},
          </if>
          <if test="color != null">
              color = #{color},
          </if>
          <if test="material != null">
              material = #{material},
          </if>
          <if test="haveFlaw != null">
              have_flaw = #{haveFlaw},
          </if>
          <if test="tyreSize != null">
              tyre_size = #{tyreSize},
          </if>
          <if test="holeSpacing != null">
              hole_spacing = #{holeSpacing},
          </if>
          <if test="manufacturMode != null">
              manufactur_mode = #{manufacturMode},
          </if>
          <if test="lightType != null">
              light_type = #{lightType},
          </if>
          <if test="hubSize != null">
              hub_size = #{hubSize},
          </if>
          <if test="size != null">
              size = #{size},
          </if>
          <if test="type != null">
              type = #{type},
          </if>
          <if test="flaw != null">
              flaw = #{flaw},
          </if>
          <if test="position != null">
              position = #{position},
          </if>
          <if test="commodityNum != null">
              commodity_num = #{commodityNum},
          </if>
          update_time = SYSDATE()
        WHERE id = #{commodityId}
    </update>
</mapper>